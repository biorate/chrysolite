# Настройки по умолчанию

По умолчанию клиент запускается на порту `10000`, а сервер - на порту `3000`.
Иногда возникает необходимость запустить два приложения одновременно - например, чтобы проверить, как сервисы одновременно взаимодействуют с одной базой данных.

## Изменение номера порта для клиента

Порт по умолчанию настраивается в `webpack.config.js`:

```ts
  devServer: {
    static: 'dist',
    compress: true,
    port: clientPort,
    hot: true,
  },
```

Если при старте клиента указать переменную `CLIENT_PORT`, то клиент будет запущен с указанным портом. Иначе запустится на стандартном порту `10000`.

Пример скрипта из `package.json`:

```json
"scripts": {
  "build:debug": "cross-env CLIENT_PORT=10001 npx webpack serve --history-api-fallback --config=../../webpack.config.js --mode=development --hot --open --entry=./src/index.tsx --entry=./src/index.pug --entry=./src/index.less -o ./dist",
},
```

> Команда `cross-env` нужна для запуска скрипта независимо от операционной системы.

## Изменение номера порта для сервера

Порт по умолчанию указан в файле `\apps\server\src\application.ts` (работа с конфигами `Vault` [описана здесь](./VAULT_LOADER.md)):

```ts
@init() protected async initialize() {
  const host = this.config.get<string>('app.host', '0.0.0.0');
  const port = this.config.get<number>('app.port', 3000);
```

Для того, чтобы сервер запустился на другом порту, нужно

- либо изменить номер порта в этой строке
- либо указать параметр `app.port` в Vault-конфиге

> Если указать "0", сервер запустится на случайном свободном порту.
>
> Однако, такой способ подходит лишь тогда, когда у сервера нет клиентской части, так как для клиента этот порт должен быть прописан в файле `webpack.config.js` (переменная `const host = 'localhost:3000';`).
>
> То есть если в приложении есть и сервер, и клиент, то новый порт сервера нужно указать руками, прописав его в строчках `const port = this.config.get<number>('app.port', 3000);` и `const host = 'localhost:3000';`.
